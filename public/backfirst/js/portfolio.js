jQuery(document).ready(function(e){var t=function(){var t,n=e("#portfolio"),r=n.find(".portfolio"),i=n.data("columns"),s=e("#portfolio-filters a"),o=e("#portfolio-selector"),u=function(){a();f(i);l()},a=function(){s.click(function(t){t.preventDefault();var r=e(this).data("filter");n.isotope({filter:r});return false});o.change(function(){val=e(this).val();f(val)})},f=function(e){if(e==4){t=3;i=4}if(e==3){t=4;i=3}if(e==2){t=6;i=2}r.removeClass("span3 span4 span6").addClass("span"+t);l()},l=function(){e(window).smartresize(function(){n.isotope({itemSelector:".portfolio",resizable:false,masonry:{columnWidth:n.width()/i}})}).smartresize();n.imagesLoaded(function(){e(window).smartresize()});o.val(i)};return{init:u}}();t.init()});$(window).load(function(){var e=function(){var e,t=$("section.our-work"),n=t.find(".portfolio"),r=$(".portfolio-back"),i=$("section.portfolio-single"),s=i.find(".basket"),o=$(".portfolio-next"),u=$(".portfolio-prev"),a,f=function(){l();c()},l=function(){$(".portfolio-ajax").live("click",function(t){t.preventDefault();c();i.slideUp();a=$(this).parent(".portfolio").index();p(a);h(a);r.slideDown();$("html, body").animate({scrollTop:e},750,function(){i.slideDown(500)})});$(".portfolio-next").live("click",function(e){e.preventDefault();s.hide();h(a+1);s.fadeIn();a=a+1;p(a)});$(".portfolio-prev").live("click",function(e){e.preventDefault();s.hide();h(a-1);s.fadeIn();a=a-1;p(a)});$(".portfolio-back").live("click",function(e){e.preventDefault();s.html("");i.slideUp();$("html, body").animate({scrollTop:$portfolioPosition},750)})},c=function(){i.show();$sectionPosition=i.offset().top;i.hide();$buttonHeight=r.actual("innerHeight")+30;e=$sectionPosition-$buttonHeight;$portfolioPosition=t.offset().top},h=function(e){s.html("");$item=n.eq(e).find(".portfolio-ajax");$link=$item.attr("href")+" #load";$title=$item.data("title");$subtitle=$item.data("subtitle");$(".portfolio-title").html($title);$(".portfolio-subtitle").html($subtitle);s.load($link)},p=function(e){e==n.length-1?o.hide():o.show();e==0?u.hide():u.show()},d=function(){$(window).scrollTop()<e+10?r.hide():r.show()};return{init:f}}();e.init()})
